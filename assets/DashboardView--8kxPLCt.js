import{a as n}from"./axios-G2rPRu76.js";import{_ as p,c as k,b as r,d as c,w as a,e as t,i as f,k as V,l as g,r as i,o as l}from"./index-fZ5w6lkA.js";var R={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_NAME:"qoo",BASE_URL:"/Vue-2023-week8/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:d}=R,v={data(){return{checkSuccess:!1}},methods:{checkAdmin(){const o=`${d}/api/user/check`;n.post(o).then(e=>{this.checkSuccess=!0,console.log("驗證成功：",e.data.success),alert("驗證成功：",e.data.success)}).catch(()=>{this.$router.push("/login")})},loginOut(){const o=`${d}/logout`;n.post(o).then(e=>{alert("成功登出！"),document.cookie="loginToken=; expires=; path=/",this.$router.push("/")}).catch(e=>{alert(e.response.data.message)})}},mounted(){const o=document.cookie.replace(/(?:(?:^|.*;\s*)loginToken\s*=\s*([^;]*).*$)|^.*$/,"$1");n.defaults.headers.common.Authorization=o,this.checkAdmin()}},x={class:"container"},E=r("h2",null,"後台",-1);function $(o,e,w,S,h,u){const s=i("RouterLink"),_=i("RouterView");return l(),k("div",x,[E,r("nav",null,[c(s,{to:"/admin/products"},{default:a(()=>[t("產品列表")]),_:1}),t(" | "),c(s,{to:"/admin/order"},{default:a(()=>[t("訂單")]),_:1}),t(" | "),c(s,{to:"/admin/coupon"},{default:a(()=>[t("優惠卷")]),_:1}),t(" | "),c(s,{to:"/"},{default:a(()=>[t("返回前台")]),_:1}),t(" | "),r("a",{href:"",onClick:e[0]||(e[0]=f((...m)=>u.loginOut&&u.loginOut(...m),["prevent"]))},"登出")]),h.checkSuccess?(l(),V(_,{key:0})):g("",!0)])}const B=p(v,[["render",$]]);export{B as default};
