import{a as r}from"./axios-G2rPRu76.js";import{_ as m,c as p,b as s,d as n,w as a,e as t,j as f,l as v,q as V,F as g,r as i,o as u}from"./index-4BTZusAp.js";var R={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_NAME:"qoo",BASE_URL:"/Vue-2023-week8/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:d}=R,x={data(){return{checkSuccess:!1}},methods:{checkAdmin(){const o=`${d}/api/user/check`;r.post(o).then(e=>{this.checkSuccess=!0,console.log("驗證成功：",e.data.success),alert("驗證成功：",e.data.success)}).catch(()=>{this.$router.push("/login")})},loginOut(){const o=`${d}/logout`;r.post(o).then(e=>{alert("成功登出！"),document.cookie="loginToken=; expires=; path=/",this.$router.push("/")}).catch(e=>{alert(e.response.data.message)})}},mounted(){const o=document.cookie.replace(/(?:(?:^|.*;\s*)loginToken\s*=\s*([^;]*).*$)|^.*$/,"$1");r.defaults.headers.common.Authorization=o,this.checkAdmin()}},E={class:"nav-style pt-6"},$={class:"container mt-6"},w=s("h2",null,"後台",-1),y={class:"mb-4"},S={class:"container mb-6"};function T(o,e,A,B,h,l){const c=i("RouterLink"),_=i("RouterView");return u(),p(g,null,[s("div",E,[s("div",$,[w,s("nav",y,[n(c,{class:"link-style router-link-hover",to:"/admin/products"},{default:a(()=>[t("產品列表")]),_:1}),t(" | "),n(c,{class:"link-style router-link-hover",to:"/admin/order"},{default:a(()=>[t("訂單")]),_:1}),t(" | "),n(c,{class:"link-style router-link-hover",to:"/admin/coupon"},{default:a(()=>[t("優惠卷")]),_:1}),t(" | "),n(c,{class:"link-style router-link-hover",to:"/"},{default:a(()=>[t("返回前台")]),_:1}),t(" | "),s("a",{class:"link-style router-link-hover",href:"",onClick:e[0]||(e[0]=f((...k)=>l.loginOut&&l.loginOut(...k),["prevent"]))},"登出")])])]),s("div",S,[h.checkSuccess?(u(),v(_,{key:0})):V("",!0)])],64)}const O=m(x,[["render",T]]);export{O as default};
